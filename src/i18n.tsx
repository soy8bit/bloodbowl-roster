import { createContext, useContext, useState, useEffect, useCallback, type ReactNode } from 'react';

export type Lang = 'en' | 'es';

const strings = {
  en: {
    // Header
    appTitle: 'BB Toolkit Dugout',
    newTeam: 'New Team',
    savedRosters: 'My Teams',
    switchToLight: 'Switch to light mode',
    switchToDark: 'Switch to dark mode',

    // Navigation
    navHome: 'Home',
    navSkills: 'Skills',
    navStarPlayers: 'Star Players',
    navAdmin: 'Admin',
    navLogin: 'Login',
    navLogout: (email: string) => `Logout (${email})`,
    navMenu: 'Menu',
    navSectionTeams: 'Teams',
    navSectionReference: 'Reference',

    // Team selector
    chooseTeam: 'Choose Your Team',
    searchTeams: 'Search teams...',
    showRetired: 'Show retired teams',
    tier1: 'Tier 1',
    tier2: 'Tier 2',
    tier3: 'Tier 3',
    noSpecialRules: 'No special rules',
    rerollCost: 'Reroll:',
    positions: 'positions',
    noTeamsMatch: 'No teams match your search',

    // Roster builder
    back: 'Back',
    teamNamePlaceholder: 'Team Name',
    coachNamePlaceholder: 'Coach Name',
    uploadLogo: 'Upload Logo',
    logoTooLarge: 'Image must be under 2MB',
    removeLogo: 'Remove Logo',
    hideAvailable: 'Hide Available Players',
    showAvailable: 'Show Available Players',
    roster: 'Roster',
    name: 'Name',
    position: 'Position',
    skills: 'Skills',
    cost: 'Cost',
    qty: 'Qty',
    addPlayersHint: 'Add players from the list above',
    availablePlayers: 'Available Players',
    none: 'None',
    addPlayer: 'Add player',
    removePlayer: 'Remove player',
    generateRandomName: 'Generate random name',

    // Star Players
    starPlayers: 'Star Players',
    searchStar: 'Search star player...',
    alreadyHired: 'Already hired',
    hire: 'Hire',
    noStarsAvailable: 'No star players available',

    // Inducements
    inducements: 'Inducements',

    // Tabs builder
    tabRoster: 'Roster',
    tabStarPlayers: 'Stars',
    tabInducements: 'Inducements',
    tabProgression: 'Progression',
    tabGames: 'Games',
    tabStaff: 'Staff & Config',

    // Budget bar
    budgetLabel: 'Budget',
    tvBreakdown: 'TV Breakdown',
    tvPlayers: 'Players',
    tvStars: 'Stars',
    tvInducements: 'Inducements',
    tvRerolls: 'Rerolls',
    tvStaff: 'Staff',

    // Toast/feedback
    playerAdded: (pos: string) => `${pos} added to roster`,
    playerRemoved: (pos: string) => `${pos} removed`,
    exportSuccess: 'Export completed',
    importSuccess: 'Roster imported successfully',
    undoRemove: 'Undo',

    // Confirm modal
    cancel: 'Cancel',
    confirmRemovePlayer: (pos: string) => `Remove ${pos} from roster?`,
    remove: 'Remove',
    close: 'Close',

    // Empty states
    emptyRosterHeading: 'No Players Yet',
    emptyRosterHint: 'Add players from the available positions above to build your team.',

    // Accessibility
    ariaIncreaseRerolls: 'Increase rerolls',
    ariaDecreaseRerolls: 'Decrease rerolls',
    ariaIncreaseCoaches: 'Increase assistant coaches',
    ariaDecreaseCoaches: 'Decrease assistant coaches',
    ariaIncreaseCheerleaders: 'Increase cheerleaders',
    ariaDecreaseCheerleaders: 'Decrease cheerleaders',
    ariaIncreaseFans: 'Increase dedicated fans',
    ariaDecreaseFans: 'Decrease dedicated fans',

    // Other
    apoBadge: 'Apo',
    footerAuthor: 'by Hector del Baix',

    // Help
    navHelp: 'Help',
    helpTitle: 'Guide',
    helpPageTitle: 'User Guide',
    helpPageIntro: 'Complete guide to BB Toolkit Dugout. Use the sidebar to jump to any section.',
    helpBudgetDesc: 'Your team starts with a budget of 1,000,000 gold. The Team Value (TV) is the sum of all players, rerolls, staff, star players and inducements. Tap the TV value to see the full breakdown.',
    helpGameModeDesc: 'Tap "Game Mode" in the header to switch to a read-only match view. Track score, turns, rerolls, and player status (OK/KO/BH/SI/Dead/Sent Off). Use the dropdown to change status. All game state persists during the session.',
    helpGameResourcesDesc: 'Rerolls: use the − / + arrows to track used rerolls during the match. Assistant Coaches, Cheerleaders and Dedicated Fans help with kick-off table rolls. Apothecary can save an injured player once per game.',

    helpGettingStartedTitle: 'Getting Started',
    helpGettingStartedContent: [
      'Welcome to BB Toolkit Dugout! This app lets you create, manage, and use Blood Bowl team rosters. To start, select a team from the team selector on the home screen.',
      'Each team has its own set of available player positions, special rules, reroll costs, and whether it can hire an apothecary. Teams are classified in Tiers (1, 2, 3) based on their competitive level.',
      'You can use the search bar and tier filters to find your team quickly. Once selected, you\'ll enter the Roster Builder where you can add players, configure staff, and prepare your team for the match.',
    ],
    helpRosterTitle: 'Building Your Roster',
    helpRosterContent: [
      'The Roster tab is where you add and manage your players. At the top you\'ll see the available positions for your team with their stats, skills, cost, and maximum count.',
      'Tap the "+" button next to a position to add a player. Each position has a maximum number of players you can hire. Your roster needs at least 11 players and can have up to 16.',
      'Each player shows their stats: MA (Movement Allowance), ST (Strength), AG (Agility), PA (Passing), and AV (Armor Value). AG and PA values shown with "+" are roll targets (lower is better).',
      'You can give each player a custom name by tapping the name field in the roster. To remove a player, tap the "X" button on their row.',
    ],
    helpBudgetTitle: 'Budget & Team Value',
    helpBudgetContent: [
      'Your team starts with a treasury of 1,000,000 gold pieces (displayed as 1,000k). Every player, reroll, and staff member costs gold from this budget.',
      'The Team Value (TV) is the total value of everything in your roster: players, rerolls, staff (coaches, cheerleaders, fans), star players, and inducements. It is displayed in the top bar.',
      'Tap the TV value to expand a detailed breakdown showing exactly how your team value is distributed. This is useful for checking where your gold is going.',
      'The budget indicator shows how much gold you have left. If it turns red, you\'ve exceeded your budget. You can adjust the treasury amount in the Staff tab if your league uses a different starting budget.',
    ],
    helpStaffTitle: 'Staff & Team Configuration',
    helpStaffContent: [
      'In the Staff tab you can manage your team\'s support staff and configuration. Use the +/- buttons to adjust quantities.',
      'Rerolls: Allow you to re-roll dice during a match. The cost varies by team (shown next to the counter). Each team has a maximum number of rerolls.',
      'Assistant Coaches: Add +1 to your BRILLIANT COACHING roll at kick-off. You can hire up to 6.',
      'Cheerleaders: Add +1 to your CHEERING FANS roll at kick-off. You can hire up to 6.',
      'Dedicated Fans: Your starting fan base (1-6). Affects revenue and THROW A ROCK results.',
      'Apothecary: If available for your team, allows you to attempt to heal a player who suffers a Casualty or KO result once per match. Costs 50k.',
      'Treasury: Your total budget. Defaults to 1,000k but you can modify it for custom league budgets.',
    ],
    helpStarsTitle: 'Star Players',
    helpStarsContent: [
      'Star Players are famous mercenaries that can be hired for your team. They are found in the Star Players tab.',
      'Available star players are filtered based on your team\'s special rules. Each star lists which teams or special rules can hire them.',
      'Star players have their own stats and skills and are more powerful than regular players, but they come at a high gold cost.',
      'Hired star players appear in both the Star Players tab and the Roster tab, and are included in your Team Value calculation. They also appear in the Game Mode view and in exported PDFs.',
      'Use the search bar to filter stars by name or skills. You cannot hire the same star player twice.',
    ],
    helpInducementsTitle: 'Inducements',
    helpInducementsContent: [
      'Inducements are one-time purchases available in the Inducements tab. They represent special resources for a single match.',
      'Common inducements include: Bloodweiser Kegs (re-roll KO recovery), Bribes (avoid send-off), Wizards (one-shot magic attack), Extra Training (additional team re-roll), and more.',
      'Each inducement has a cost and a maximum quantity. Some inducements are restricted to certain team types.',
      'Inducements add to your Team Value and appear in Game Mode for quick reference during play.',
    ],
    helpSkillsTitle: 'Skills',
    helpSkillsContent: [
      'Each player comes with a set of skills determined by their position. Tap any skill badge on a player to see its full description.',
      'Skills are color-coded by category: Agility (green), General (blue), Mutation (purple), Passing (orange), Strength (red), and Traits (gray).',
      'You can browse all skills in the dedicated Skills page, accessible from the navigation menu. Use the search and category filters to find specific skills.',
      'In Game Mode, skill badges remain tappable so you can quickly look up rules during a match.',
    ],
    helpGameModeTitle: 'Game Mode',
    helpGameModeContent: [
      'Game Mode is a read-only match view designed for use during play. Tap "Game Mode" in the roster header to activate it. The app goes fullscreen (hides the header and footer) to maximize screen space.',
      'Scoreboard: Track the score for both Home and Away teams with +/- buttons. The turn counter (1-8) and half selector (H1/H2) are in the center.',
      'Resources: A compact bar shows your available rerolls (use − / + to track usage), apothecary, assistant coaches, cheerleaders, and fans. A summary counter shows how many players are in each status.',
      'Player Status: Each player card has a colored dropdown to set their status: OK (green), KO (yellow), BH - Badly Hurt (red), SI - Serious Injury (dark red), Dead (gray), or Sent Off (purple). The card\'s left border changes color to match.',
      'Players are automatically sorted by status: active players first, then injured, then dead/sent off. This helps you quickly see who is available.',
      'All game state (scores, turns, rerolls, player statuses) is saved in your browser session. If you refresh, your game state is preserved. It resets when you close the browser tab.',
      'Tap "Edit Mode" to go back to the roster builder. Your game state is kept so you can switch freely between modes.',
    ],
    helpExportTitle: 'Export & Import',
    helpExportContent: [
      'Export PDF: Generates a printable roster sheet with all players, stats, skills, star players, and staff. The PDF also includes a skills reference section listing all skills used by your players. Optimized for A4 printing.',
      'Export JSON: Saves your roster as a JSON file. Use this to backup your roster or share it with other players who use this app.',
      'Import: Load a previously exported JSON file to restore a roster. This will create a new roster entry from the file.',
      'Share Link: If you are logged in, you can generate a unique share link for your roster. Anyone with the link can view the roster (read-only) without needing an account.',
      'All export/import options are found in the Staff tab of the Roster Builder.',
    ],
    helpSavedTitle: 'My Teams',
    helpSavedContent: [
      'All rosters are automatically saved in your browser\'s local storage. Access them from the "Saved Rosters" option in the menu.',
      'The saved rosters list shows each roster\'s name, team type, player count, and team value at a glance.',
      'You can load any saved roster to edit it, or delete rosters you no longer need. Deletion is permanent and cannot be undone.',
      'Cloud Save: If you are logged in, your rosters can also be saved to the cloud. Cloud-saved rosters are accessible from any device via your account and can be shared with a unique link.',
      'Note: Local rosters are saved in your browser. Clearing your browser data will delete them. Use JSON export or cloud save to create backups.',
    ],
    helpMatchesTitle: 'Match Reports',
    helpMatchesContent: [
      'Match Reports let you record and track your games. Access them from the "Match Reports" section in the navigation menu. You must be logged in to create and save match reports.',
      'Creating a Report: Tap "New Match Report" to start a step-by-step wizard. Step 1: Select two different rosters (Home and Away) from your saved rosters. Step 2: Enter match details — date, round, competition, score, and optional notes. Step 3: Record player events (TD, CAS, CP, INT, DEF, MVP) for each player. Step 4: Review everything and save.',
      'SPP Calculation: Star Player Points are automatically calculated for each player: TD = 3 SPP, Casualty = 2 SPP, Completed Pass = 1 SPP, Interception = 2 SPP, Deflection = 1 SPP, MVP = 4 SPP (max 1 MVP per team).',
      'TD Warning: If the sum of TDs recorded for a team\'s players doesn\'t match the team\'s score, a warning is displayed so you can correct it before saving.',
      'Editing: You can edit a saved match report to update scores, events, or details. Open the match detail and tap "Edit" to modify it.',
      'Sharing: Generate a unique share link for any match report. Anyone with the link can view the report (read-only) without an account. You can revoke the share at any time.',
      'PDF Export: Export any match report as a printable PDF showing the full scoreboard, player events, and SPP breakdown for both teams.',
    ],
    helpStatsTitle: 'Statistics',
    helpStatsContent: [
      'The Statistics page provides aggregated data from all your match reports. Access it from "Statistics" in the Matches section of the navigation menu.',
      'Team Stats: A league table showing each team\'s record — games played, wins, draws, losses, touchdowns scored and conceded, casualties inflicted, and total points (W=3, D=1, L=0).',
      'Player Stats: Individual player rankings showing TDs, CAS, CP, INT, DEF, MVP awards, and total SPP across all matches. See which of your players are the top performers.',
      'Competition Filter: Filter statistics by competition name to view standings for a specific league or tournament, or view "All competitions" for the combined totals.',
    ],
    helpAccountTitle: 'Account',
    helpAccountContent: [
      'The Account page is available when you are logged in. Access it from the navigation menu under your user section.',
      'Profile: View your email, set a display name (2-50 characters), and see your current plan (Free or Premium) and membership date.',
      'My Rosters: View all your cloud-saved rosters in one place, with team name, date, and whether they have a share link.',
      'My Matches: Browse your recent match reports with scores and competition info. Tap any match to view its full details.',
      'My Competitions: View leagues and tournaments you are a member of, your role, and their current status.',
    ],
    helpShortcutsTitle: 'Tips & Shortcuts',
    helpShortcutsContent: [
      'Language: Toggle between English and Spanish with the flag button in the header.',
      'Theme: Switch between dark and light mode using the sun/moon toggle in the header.',
      'TV Breakdown: Tap the Team Value in the budget bar to expand the detailed cost breakdown.',
      'Skill Lookup: Tap any skill badge anywhere in the app (roster, game mode, star players) to see its description.',
      'Star Players Page: Browse all star players in the game from the "Star Players" page in the Reference section. Filter by name, team, or special rules.',
      'Skills Page: Browse all skills organized by category from the "Skills" page in the Reference section.',
      'Game Mode Swipe: On mobile, swipe left on a player card to quickly cycle their status to the next value.',
    ],

    // Summary
    teamValue: 'Team Value',
    rerolls: 'Rerolls',
    each: 'each',
    assistantCoaches: 'Assistant Coaches',
    cheerleaders: 'Cheerleaders',
    dedicatedFans: 'Dedicated Fans',
    apothecary: 'Apothecary',
    treasury: 'Treasury',
    players: 'Players',
    min11: '(min 11)',
    exportPdf: 'Export PDF',
    exportJson: 'Export JSON',
    import_: 'Import',
    importFailed: 'Import failed',

    // Share roster
    shareRoster: 'Share',
    unshareRoster: 'Unshare',
    shareLink: 'Share link',
    shareCopied: 'Link copied!',
    shareRequiresCloud: 'Save to cloud first to share',
    shareRequiresLogin: 'Log in to share rosters',
    sharedRosterTitle: 'Shared Roster',
    sharedRosterNotFound: 'Shared roster not found or link expired',

    // Saved rosters
    importJson: 'Import JSON',
    noSavedRosters: 'No saved teams yet.',
    createToStart: 'Create a new team to get started!',
    unnamed: 'Unnamed',
    playersCount: 'players',
    delete_: 'Delete',
    deleteConfirm: (name: string) => `Delete roster "${name}"? This cannot be undone.`,

    // Skill modal
    catAgility: 'Agility',
    catGeneral: 'General',
    catMutation: 'Mutation',
    catPassing: 'Passing',
    catStrength: 'Strength',
    catDevious: 'Devious',
    catTrait: 'Trait',
    catExtraordinary: 'Extraordinary',

    // Validation
    maxPlayersReached: 'Maximum 16 players reached',
    playerNotAvailable: 'Player not available for this team',
    maxPosition: (n: number) => `Maximum ${n} of this position`,
    tooManyPlayers: (have: number, max: number) => `Too many players: ${have}/${max}`,
    needMinPlayers: (min: number, have: number) => `Need at least ${min} players (have ${have})`,
    tooManyRerolls: (have: number, max: number) => `Too many rerolls: ${have}/${max}`,
    tooManyPosition: (id: number, have: number, max: number) => `Too many of position ID ${id}: ${have}/${max}`,

    // Game Mode
    gameMode: 'Game Mode',
    exitGameMode: 'Edit Mode',
    gameResources: 'Resources',
    gameStarPlayers: 'Star Players',
    gameInducements: 'Inducements',
    coach: 'Coach',
    playerStatus: 'Status',
    statusOk: 'OK',
    statusKo: 'KO',
    statusBh: 'BH',
    statusSi: 'SI',
    statusDead: 'Dead',
    statusSent: 'Sent Off',
    score: 'Score',
    home: 'HOME',
    away: 'AWAY',
    turn: 'Turn',
    half1: 'H1',
    half2: 'H2',
    available: 'Available',

    // PDF
    pdfTitle: 'Blood Bowl Roster',
    unnamedTeam: 'Unnamed Team',
    pdfTeamValue: 'Team Value:',
    noPlayers: 'No players',
    pdfRerolls: 'Rerolls',
    pdfCoaches: 'Assistant Coaches',
    pdfCheerleaders: 'Cheerleaders',
    pdfFans: 'Dedicated Fans',
    pdfApothecary: 'Apothecary',
    pdfTreasury: 'Treasury',
    yes: 'Yes',
    no: 'No',
    pdfPlayers: 'Players:',
    pdfFooter: 'BB Toolkit Dugout',

    // Landing
    landingTagline: 'Roster Maker \u00B7 Match Reports \u00B7 Leagues \u00B7 Tournaments',
    landingSubtitle: 'Everything you need to run a Blood Bowl league.',
    landingSubtitle2: 'All teams, all rules, all in one place. Season 3.',
    landingCta: 'Create Your Roster',
    landingCtaSaved: 'My Teams',
    landingFeaturesTitle: 'Everything You Need',
    landingFeature1Title: 'Roster Builder',
    landingFeature1Desc: 'Every official Blood Bowl team with correct positions, stats, skills, and tier classification. Smart budget tracking with Team Value breakdown.',
    landingFeature2Title: 'Match Reports',
    landingFeature2Desc: 'Record your games with a step-by-step wizard. Track TDs, casualties, passes, interceptions, and MVP per player. Auto-calculated SPP.',
    landingFeature3Title: 'Leagues & Tournaments',
    landingFeature3Desc: 'Create and manage leagues and tournaments with standings, roster snapshots, and automatic progression (SPP, injuries, deaths).',
    landingFeature4Title: 'Star Players & Inducements',
    landingFeature4Desc: 'Hire star players filtered by your team\'s special rules. Add inducements like Wizards, Bribes, and Bloodweiser Kegs.',
    landingFeature5Title: 'Game Mode',
    landingFeature5Desc: 'A dedicated match-day view to track scores, turns, rerolls, and player status (OK/KO/BH/SI/Dead). Designed for quick mobile use.',
    landingFeature6Title: 'Share & Export',
    landingFeature6Desc: 'Share rosters and match reports via link. Export print-ready PDFs or JSON files. Import rosters from other coaches.',
    landingFeature7Title: 'Player Progression',
    landingFeature7Desc: 'Level up your players with skill upgrades, track injuries, and manage Star Player Points across matches and competitions.',
    landingFeature8Title: 'Skills Reference',
    landingFeature8Desc: 'Full skill and star player database with descriptions, color-coded by category. Tap any skill badge for instant lookup.',
    landingHowTitle: 'How It Works',
    landingStep1: 'Pick your team from all official Blood Bowl races',
    landingStep2: 'Add players, staff, stars, and inducements within budget',
    landingStep3: 'Play matches, track stats, and run your league',
    landingBottomText: 'Ready to run your Blood Bowl league?',

    // Matches / Acta de Partido
    navMatches: 'Matches',
    navSectionMatches: 'Matches',
    matchesTitle: 'Match Reports',
    newMatch: 'New Match Report',
    matchDate: 'Date',
    matchRound: 'Round',
    matchCompetition: 'Competition',
    matchHomeTeam: 'Home Team',
    matchAwayTeam: 'Away Team',
    matchTD: 'TD',
    matchCAS: 'CAS',
    matchMVP: 'MVP',
    matchSPP: 'SPP',
    matchSave: 'Save Report',
    matchDelete: 'Delete',
    matchExportPdf: 'Export PDF',
    matchNoMatches: 'No match reports yet.',
    matchCreateFirst: 'Create your first match report!',
    matchLoginRequired: 'Log in to save match reports.',
    matchNext: 'Next',
    matchPrevious: 'Previous',
    matchStep1: 'Select Teams',
    matchStep2: 'Match Details',
    matchStep3: 'Player Events',
    matchStep4: 'Review',
    matchSelectRoster: 'Select a roster',
    matchSameRosterError: 'Home and Away teams must be different',
    matchScore: 'Score',
    matchNotes: 'Notes',
    matchTotal: 'Total',
    matchReview: 'Review & Save',
    matchBackToList: 'Back to Matches',
    matchDeleteConfirm: (name: string) => `Delete match report "${name}"? This cannot be undone.`,
    matchSaving: 'Saving...',
    matchNoRosters: 'No rosters found. Create rosters first.',
    matchPlayers: 'Players',
    matchVs: 'vs',
    matchCP: 'CP',
    matchINT: 'INT',
    matchDEF: 'DEF',
    matchEdit: 'Edit Match Report',
    matchEditBtn: 'Edit',
    matchShare: 'Share',
    matchUnshare: 'Unshare',
    matchShareLink: 'Share link',
    matchTdWarning: (team: string, tdSum: number, score: number) => `${team}: player TDs (${tdSum}) don't match score (${score})`,
    matchStatsTitle: 'Statistics',
    matchStatsAll: 'All competitions',
    matchStatsTeams: 'Teams',
    matchStatsPlayers: 'Players',
    matchStatsRace: 'Race',
    matchStatsP: 'P',
    matchStatsW: 'W',
    matchStatsD: 'D',
    matchStatsL: 'L',
    matchStatsTDF: 'TF',
    matchStatsTDA: 'TA',
    matchStatsCAS: 'CAS',
    matchStatsPts: 'Pts',
    matchStatsTeam: 'Team',
    matchStatsGames: 'GP',

    // Account / Profile
    accountTitle: 'My Account',
    accountLoginRequired: 'Log in to access your account.',
    accountTabProfile: 'Profile',
    accountTabRosters: 'Rosters',
    accountTabMatches: 'Matches',
    accountTabCompetitions: 'Competitions',
    accountEmail: 'Email',
    accountDisplayName: 'Display Name',
    accountNoName: 'Not set',
    accountSave: 'Save',
    accountEditBtn: 'Edit',
    accountPlan: 'Plan',
    accountUntil: 'until',
    accountMemberSince: 'Member since',
    accountRole: 'Role',
    accountNoRosters: 'No cloud-saved rosters yet.',
    accountNoCompetitions: 'No competitions yet.',
    accountShared: 'Shared',
    accountLeague: 'League',
    accountTournament: 'Tournament',
    accountStatusActive: 'Active',
    accountStatusFinished: 'Finished',
    accountOwner: 'Owner',
    navAccount: 'Account',

    // Competitions
    compLeagues: 'Leagues',
    compTournaments: 'Tournaments',
    compCreate: 'Create',
    compNamePlaceholder: 'Competition name...',
    compLoginRequired: 'Log in to manage competitions.',
    compLoading: 'Loading...',
    compNoCompetitions: 'No competitions yet.',
    compNotFound: 'Competition not found.',
    compStatusActive: 'Active',
    compStatusFinished: 'Finished',
    compStatusArchived: 'Archived',
    compOwner: 'Owner',
    compMember: 'Member',
    compRostersCount: (n: number) => `${n} roster${n !== 1 ? 's' : ''}`,
    compDeleteConfirm: (name: string) => `Delete "${name}"? All rosters and matches will be lost.`,
    compStandings: 'Standings',
    compMatches: 'Matches',
    compRosters: 'Rosters',
    compNewMatch: 'New Match',
    compNoMatches: 'No matches yet.',
    compNoRosters: 'No rosters enrolled.',
    compEnrollRoster: 'Enroll Roster',
    compEnrollBtn: 'Enroll',
    compEnrolling: 'Enrolling...',
    compAlreadyEnrolled: 'Already enrolled',
    compFinish: 'Finish',
    compReactivate: 'Reactivate',
    compRemoveRosterConfirm: 'Remove this roster from the competition?',
    compDeleteMatchConfirm: 'Delete this match? Progression will be reverted.',
    compPostMatchStatus: 'Status',
    compPMS_ok: 'OK',
    compPMS_ko: 'KO',
    compPMS_bh: 'BH',
    compPMS_si: 'SI',
    compPMS_dead: 'Dead',
    compPMS_mng: 'MNG',
    compInjury_niggle: 'Niggle',
    compInjury_MA: '-MA',
    compInjury_AV: '-AV',
    compInjury_AG: '-AG',
    compInjury_PA: '-PA',
    compInjury_ST: '-ST',
    compMatchStep2: 'Events',
    compMatchStep3: 'Review',
    compStandingsTeam: 'Team',
    compStandingsCoach: 'Coach',
    compStandingsRace: 'Race',
    navSectionCompetitions: 'Competitions',
    navLeagues: 'Leagues',
    navTournaments: 'Tournaments',
    compMatchesCount: (n: number) => `${n} match${n !== 1 ? 'es' : ''}`,
    compCreatedAt: 'Created',
    compEmptyTitle: (type: string) => `No ${type}s yet`,
    compEmptyDescription: (type: string) => `Create your first ${type} to start tracking matches, standings, and roster progression.`,
    compEmptyCreate: (type: string) => `Create ${type}`,
    compSummaryRosters: 'Rosters',
    compSummaryMatches: 'Matches',
    compSummaryLeader: 'Leader',
    compSummaryNoLeader: 'No matches',
    compSummaryRounds: 'Rounds',
    compLoginTitle: 'Login required',
    compLoginDescription: 'Log in to create and manage your leagues and tournaments.',
    compMatchesEmptyTitle: 'No matches played',
    compMatchesEmptyDesc: 'Record your first match to start tracking results and progression.',
    compRostersEmptyTitle: 'No rosters enrolled',
    compRostersEmptyDesc: 'Enroll rosters from your saved teams to start the competition.',
    compNeedMoreRosters: 'Enroll at least 2 rosters before creating a match.',
    compRound: 'Round',
    compDeleteComp: 'Delete',
    // Multi-user / scheduling
    compJoin: 'Join',
    compJoinCode: 'Join Code',
    compJoinCodePlaceholder: 'Enter join code...',
    compJoinSuccess: (name: string) => `Joined "${name}"!`,
    compJoinAlready: 'You are already a member.',
    compJoinInvalid: 'Invalid join code.',
    compGenerateCode: 'Generate Code',
    compShareCode: 'Share Code',
    compCopyCode: 'Copy',
    compCodeCopied: 'Code copied!',
    compRemoveCode: 'Remove Code',
    compSchedule: 'Schedule',
    compGenerateSchedule: 'Generate Calendar',
    compDeleteSchedule: 'Delete Calendar',
    compDeleteScheduleConfirm: 'Delete all scheduled (unplayed) matches?',
    compScheduleGenerated: (matches: number, rounds: number) => `Generated ${matches} matches in ${rounds} rounds.`,
    compScheduleExists: 'Schedule already exists. Delete it first to regenerate.',
    compMyMatches: 'My Matches',
    compAllMatches: 'All Matches',
    compScheduled: 'Scheduled',
    compPlayed: 'Played',
    compReportMatch: 'Report Match',
    compMatchScheduled: 'Pending',
    compMatchPlayed: 'Played',
    compNoMyMatches: 'No matches assigned to you yet.',
    compPendingMatches: 'Pending',
    compPlayedMatches: 'Played',

    // Stat tooltips
    tipMA: 'Movement Allowance',
    tipST: 'Strength',
    tipAG: 'Agility',
    tipPA: 'Passing',
    tipAV: 'Armour Value',
    tipTD: 'Touchdown',
    tipCAS: 'Casualty',
    tipCP: 'Completed Pass',
    tipINT: 'Interception',
    tipDEF: 'Deflection',
    tipMVP: 'Most Valuable Player',
    tipSPP: 'Star Player Points',
    tipBH: 'Badly Hurt',
    tipSI: 'Serious Injury',
    tipKILL: 'Kill',
    tipP: 'Played',
    tipW: 'Won',
    tipD: 'Drawn',
    tipL: 'Lost',
    tipTDF: 'Touchdowns For',
    tipTDA: 'Touchdowns Against',
    tipDiff: 'Touchdown Difference',
    tipPts: 'Points',
    tipGP: 'Games Played',

    // Notifications
    notifTitle: 'Notifications',
    notifEmpty: 'No notifications',
    notifMarkAllRead: 'Mark all read',
    notifMatchResult: 'Match result',
    notifRosterEnrolled: 'Roster enrolled',
    notifJustNow: 'just now',
    notifMinutesAgo: (n: number) => `${n}m ago`,
    notifHoursAgo: (n: number) => `${n}h ago`,
    notifDaysAgo: (n: number) => `${n}d ago`,

    // Save / Discard
    save: 'Save',
    discard: 'Discard',
    rosterSaved: 'Roster saved',
    rosterNameRequired: 'Enter a team name before saving',
    unsavedChangesTitle: 'Unsaved changes',
    unsavedChangesMsg: 'You have unsaved changes that will be lost.',
    discardAndLeave: 'Discard & leave',

    // Cookie banner
    cookieText: 'This site uses cookies and local storage to save your rosters and preferences.',
    cookiePolicy: 'Privacy & Cookie Policy',
    cookieAccept: 'Accept',

    // Policy page
    policyTitle: 'Privacy & Cookie Policy',
    policyUpdated: 'Last updated: February 2026',
    policyIntroTitle: 'Introduction',
    policyIntroContent: [
      'BB Toolkit Dugout ("the App") is a free, open-source tool for creating and managing Blood Bowl team rosters, match reports, and competitions. We respect your privacy and are committed to transparency about how data is handled.',
      'This policy explains what data the App stores, how it is used, and your rights regarding that data.',
    ],
    policyCookiesTitle: 'Cookies',
    policyCookiesContent: [
      'The App uses a minimal cookie (or localStorage entry) solely to remember that you have accepted this cookie policy. No tracking cookies, analytics cookies, or third-party advertising cookies are used.',
      'The cookie stored is: "bb_cookies_accepted" — a simple flag ("1") indicating you have dismissed the cookie banner. It has no expiration and can be deleted at any time by clearing your browser data.',
    ],
    policyLocalStorageTitle: 'Local Storage',
    policyLocalStorageContent: [
      'The App uses your browser\'s Local Storage and Session Storage to save data locally on your device. This data never leaves your browser and is not sent to any server.',
      'Data stored includes: your saved rosters (team composition, player names, staff configuration), your language preference (English/Spanish), your theme preference (dark/light), and temporary game mode state (scores, turns, player statuses) in session storage.',
      'All stored data remains on your device. Clearing your browser data or local storage will permanently delete all saved rosters and preferences.',
    ],
    policyDataTitle: 'Data Collection',
    policyDataContent: [
      'The App does not collect, transmit, or store any personal data on external servers. There are no user accounts required to use the roster builder (the login feature is reserved for admin purposes only).',
      'No analytics, telemetry, or usage tracking of any kind is performed. Your IP address is not logged by the App.',
    ],
    policyThirdPartyTitle: 'Third-Party Services',
    policyThirdPartyContent: [
      'The App is hosted as a static website. No third-party scripts for analytics, advertising, or tracking are loaded.',
      'The only external resources loaded are web fonts (Google Fonts: Bungee, Inter) for typography purposes. Google\'s font service may log standard web request data per their own privacy policy.',
    ],
    policyRightsTitle: 'Your Rights',
    policyRightsContent: [
      'Since all data is stored locally in your browser, you have full control over it at all times. You can view, export (via JSON export), or delete your data whenever you wish.',
      'To delete all App data: clear your browser\'s local storage for this site, or use your browser\'s "Clear site data" option.',
    ],
    policyContactTitle: 'Contact',
    policyContactContent: [
      'If you have any questions about this privacy policy or the App, you can reach us through the project\'s repository or contact the developer.',
    ],
  },
  es: {
    // Header
    appTitle: 'BB Toolkit Dugout',
    newTeam: 'Nuevo Equipo',
    savedRosters: 'Mis Equipos',
    switchToLight: 'Cambiar a modo claro',
    switchToDark: 'Cambiar a modo oscuro',

    // Navigation
    navHome: 'Inicio',
    navSkills: 'Habilidades',
    navStarPlayers: 'Jugadores Estrella',
    navAdmin: 'Admin',
    navLogin: 'Iniciar sesion',
    navLogout: (email: string) => `Cerrar sesion (${email})`,
    navMenu: 'Menu',
    navSectionTeams: 'Equipos',
    navSectionReference: 'Referencia',

    // Team selector
    chooseTeam: 'Elige tu Equipo',
    searchTeams: 'Buscar equipos...',
    showRetired: 'Mostrar equipos retirados',
    tier1: 'Tier 1',
    tier2: 'Tier 2',
    tier3: 'Tier 3',
    noSpecialRules: 'Sin reglas especiales',
    rerollCost: 'Repeticion:',
    positions: 'posiciones',
    noTeamsMatch: 'Ningun equipo coincide con la busqueda',

    // Roster builder
    back: 'Volver',
    teamNamePlaceholder: 'Nombre del Equipo',
    coachNamePlaceholder: 'Nombre del Coach',
    uploadLogo: 'Subir Logo',
    logoTooLarge: 'La imagen debe ser menor a 2MB',
    removeLogo: 'Quitar Logo',
    hideAvailable: 'Ocultar Jugadores Disponibles',
    showAvailable: 'Mostrar Jugadores Disponibles',
    roster: 'Plantilla',
    name: 'Nombre',
    position: 'Posicion',
    skills: 'Habilidades',
    cost: 'Coste',
    qty: 'Cant.',
    addPlayersHint: 'Añade jugadores de la lista de arriba',
    availablePlayers: 'Jugadores Disponibles',
    none: 'Ninguna',
    addPlayer: 'Añadir jugador',
    removePlayer: 'Quitar jugador',
    generateRandomName: 'Generar nombre aleatorio',

    // Star Players
    starPlayers: 'Jugadores Estrella',
    searchStar: 'Buscar estrella...',
    alreadyHired: 'Ya contratado',
    hire: 'Contratar',
    noStarsAvailable: 'No hay estrellas disponibles',

    // Inducements
    inducements: 'Incentivos',

    // Tabs builder
    tabRoster: 'Plantilla',
    tabStarPlayers: 'Estrellas',
    tabInducements: 'Incentivos',
    tabProgression: 'Progresion',
    tabGames: 'Partidos',
    tabStaff: 'Staff y Config',

    // Budget bar
    budgetLabel: 'Presupuesto',
    tvBreakdown: 'Desglose TV',
    tvPlayers: 'Jugadores',
    tvStars: 'Estrellas',
    tvInducements: 'Incentivos',
    tvRerolls: 'Repeticiones',
    tvStaff: 'Staff',

    // Toast/feedback
    playerAdded: (pos: string) => `${pos} añadido a la plantilla`,
    playerRemoved: (pos: string) => `${pos} eliminado`,
    exportSuccess: 'Exportacion completada',
    importSuccess: 'Plantilla importada correctamente',
    undoRemove: 'Deshacer',

    // Confirm modal
    cancel: 'Cancelar',
    confirmRemovePlayer: (pos: string) => `¿Eliminar ${pos} de la plantilla?`,
    remove: 'Eliminar',
    close: 'Cerrar',

    // Empty states
    emptyRosterHeading: 'Sin Jugadores',
    emptyRosterHint: 'Añade jugadores de las posiciones disponibles arriba para construir tu equipo.',

    // Accessibility
    ariaIncreaseRerolls: 'Aumentar repeticiones',
    ariaDecreaseRerolls: 'Reducir repeticiones',
    ariaIncreaseCoaches: 'Aumentar entrenadores asistentes',
    ariaDecreaseCoaches: 'Reducir entrenadores asistentes',
    ariaIncreaseCheerleaders: 'Aumentar animadoras',
    ariaDecreaseCheerleaders: 'Reducir animadoras',
    ariaIncreaseFans: 'Aumentar hinchas',
    ariaDecreaseFans: 'Reducir hinchas',

    // Other
    apoBadge: 'Apo',
    footerAuthor: 'por Hector del Baix',

    // Help
    navHelp: 'Ayuda',
    helpTitle: 'Guia',
    helpPageTitle: 'Guia de Usuario',
    helpPageIntro: 'Guia completa de BB Toolkit Dugout. Usa la barra lateral para saltar a cualquier seccion.',
    helpBudgetDesc: 'Tu equipo empieza con un presupuesto de 1.000.000 de oro. El Valor de Equipo (TV) es la suma de todos los jugadores, repeticiones, staff, estrellas e incentivos. Toca el valor de TV para ver el desglose completo.',
    helpGameModeDesc: 'Toca "Modo Juego" en la cabecera para cambiar a la vista de partido. Controla el marcador, turnos, repeticiones y estado de jugadores (OK/KO/BH/SI/Muerto/Expulsado). Usa el desplegable para cambiar el estado. El estado se mantiene durante la sesion.',
    helpGameResourcesDesc: 'Repeticiones: usa las flechas − / + para controlar las repeticiones usadas durante el partido. Entrenadores Asistentes, Animadoras e Hinchas ayudan en las tiradas de saque. El Boticario puede salvar a un jugador herido una vez por partido.',

    helpGettingStartedTitle: 'Primeros Pasos',
    helpGettingStartedContent: [
      'Bienvenido a BB Toolkit Dugout! Esta app te permite crear, gestionar y usar plantillas de equipos de Blood Bowl. Para empezar, selecciona un equipo en la pantalla principal.',
      'Cada equipo tiene sus propias posiciones de jugadores, reglas especiales, costes de repeticion y si puede contratar boticario. Los equipos se clasifican en Tiers (1, 2, 3) segun su nivel competitivo.',
      'Puedes usar la barra de busqueda y los filtros de tier para encontrar tu equipo rapidamente. Una vez seleccionado, entraras en el Constructor de Plantillas donde podras añadir jugadores, configurar el staff y preparar tu equipo.',
    ],
    helpRosterTitle: 'Construir tu Plantilla',
    helpRosterContent: [
      'La pestaña Plantilla es donde añades y gestionas tus jugadores. Arriba veras las posiciones disponibles para tu equipo con sus stats, habilidades, coste y cantidad maxima.',
      'Toca el boton "+" junto a una posicion para añadir un jugador. Cada posicion tiene un numero maximo de jugadores. Tu plantilla necesita al menos 11 jugadores y puede tener hasta 16.',
      'Cada jugador muestra sus stats: MA (Movimiento), ST (Fuerza), AG (Agilidad), PA (Pase) y AV (Armadura). Los valores de AG y PA con "+" son objetivos de tirada (mas bajo es mejor).',
      'Puedes dar a cada jugador un nombre personalizado tocando el campo de nombre en la plantilla. Para quitar un jugador, toca el boton "X" en su fila.',
    ],
    helpBudgetTitle: 'Presupuesto y Valor de Equipo',
    helpBudgetContent: [
      'Tu equipo empieza con un tesoro de 1.000.000 de piezas de oro (mostrado como 1.000k). Cada jugador, repeticion y miembro del staff cuesta oro de este presupuesto.',
      'El Valor de Equipo (TV) es el valor total de todo en tu plantilla: jugadores, repeticiones, staff (entrenadores, animadoras, hinchas), jugadores estrella e incentivos. Se muestra en la barra superior.',
      'Toca el valor de TV para expandir un desglose detallado mostrando exactamente como se distribuye el valor de tu equipo. Util para ver a donde va tu oro.',
      'El indicador de presupuesto muestra cuanto oro te queda. Si se pone rojo, has excedido tu presupuesto. Puedes ajustar el tesoro en la pestaña Staff si tu liga usa un presupuesto diferente.',
    ],
    helpStaffTitle: 'Staff y Configuracion',
    helpStaffContent: [
      'En la pestaña Staff puedes gestionar el personal de apoyo y la configuracion de tu equipo. Usa los botones +/- para ajustar cantidades.',
      'Repeticiones: Te permiten repetir tiradas de dados durante un partido. El coste varia segun el equipo (se muestra junto al contador). Cada equipo tiene un maximo de repeticiones.',
      'Entrenadores Asistentes: Añaden +1 a tu tirada de ENTRENAMIENTO BRILLANTE en el saque. Puedes contratar hasta 6.',
      'Animadoras: Añaden +1 a tu tirada de HINCHAS ANIMANDO en el saque. Puedes contratar hasta 6.',
      'Hinchas: Tu base de fans inicial (1-6). Afecta a los ingresos y resultados de LANZAR UNA PIEDRA.',
      'Boticario: Si esta disponible para tu equipo, permite intentar curar a un jugador que sufra Baja o resultado de KO una vez por partido. Cuesta 50k.',
      'Tesoro: Tu presupuesto total. Por defecto 1.000k pero puedes modificarlo para presupuestos de liga personalizados.',
    ],
    helpStarsTitle: 'Jugadores Estrella',
    helpStarsContent: [
      'Los Jugadores Estrella son mercenarios famosos que puedes contratar para tu equipo. Se encuentran en la pestaña Jugadores Estrella.',
      'Los jugadores estrella disponibles se filtran segun las reglas especiales de tu equipo. Cada estrella indica que equipos o reglas especiales pueden contratarla.',
      'Los jugadores estrella tienen sus propios stats y habilidades y son mas poderosos que los jugadores normales, pero tienen un alto coste en oro.',
      'Los jugadores estrella contratados aparecen tanto en la pestaña de Estrellas como en la de Plantilla, y se incluyen en el calculo del Valor de Equipo. Tambien aparecen en el Modo Juego y en los PDFs exportados.',
      'Usa la barra de busqueda para filtrar estrellas por nombre o habilidades. No puedes contratar al mismo jugador estrella dos veces.',
    ],
    helpInducementsTitle: 'Incentivos',
    helpInducementsContent: [
      'Los Incentivos son compras puntuales disponibles en la pestaña Incentivos. Representan recursos especiales para un unico partido.',
      'Incentivos comunes incluyen: Barriles Bloodweiser (repetir recuperacion de KO), Sobornos (evitar expulsion), Magos (ataque magico de un solo uso), Entrenamiento Extra (repeticion de equipo adicional), y mas.',
      'Cada incentivo tiene un coste y una cantidad maxima. Algunos incentivos estan restringidos a ciertos tipos de equipo.',
      'Los incentivos suman al Valor de Equipo y aparecen en el Modo Juego para consulta rapida durante la partida.',
    ],
    helpSkillsTitle: 'Habilidades',
    helpSkillsContent: [
      'Cada jugador viene con un conjunto de habilidades determinado por su posicion. Toca cualquier badge de habilidad para ver su descripcion completa.',
      'Las habilidades tienen colores por categoria: Agilidad (verde), General (azul), Mutacion (morado), Pase (naranja), Fuerza (rojo) y Rasgos (gris).',
      'Puedes explorar todas las habilidades en la pagina dedicada de Habilidades, accesible desde el menu de navegacion. Usa la busqueda y filtros de categoria para encontrar habilidades especificas.',
      'En el Modo Juego, los badges de habilidades siguen siendo tocables para que puedas consultar reglas rapidamente durante un partido.',
    ],
    helpGameModeTitle: 'Modo Juego',
    helpGameModeContent: [
      'El Modo Juego es una vista de solo lectura diseñada para usar durante la partida. Toca "Modo Juego" en la cabecera de la plantilla para activarlo. La app entra en pantalla completa (oculta cabecera y pie) para maximizar el espacio.',
      'Marcador: Controla el resultado para los equipos Local y Visitante con los botones +/-. El contador de turno (1-8) y el selector de mitad (H1/H2) estan en el centro.',
      'Recursos: Una barra compacta muestra tus repeticiones disponibles (usa − / + para controlar el uso), boticario, entrenadores asistentes, animadoras e hinchas. Un contador resumen muestra cuantos jugadores hay en cada estado.',
      'Estado del Jugador: Cada tarjeta de jugador tiene un desplegable con colores para establecer su estado: OK (verde), KO (amarillo), BH - Herida Grave (rojo), SI - Lesion Seria (rojo oscuro), Muerto (gris) o Expulsado (morado). El borde izquierdo de la tarjeta cambia de color segun el estado.',
      'Los jugadores se ordenan automaticamente por estado: activos primero, luego heridos, luego muertos/expulsados. Esto te ayuda a ver rapidamente quien esta disponible.',
      'Todo el estado del partido (marcador, turnos, repeticiones, estados de jugadores) se guarda en la sesion del navegador. Si refrescas, el estado se mantiene. Se reinicia al cerrar la pestaña.',
      'Toca "Modo Edicion" para volver al constructor. Tu estado de partido se mantiene y puedes cambiar libremente entre modos.',
    ],
    helpExportTitle: 'Exportar e Importar',
    helpExportContent: [
      'Exportar PDF: Genera una hoja de plantilla imprimible con todos los jugadores, stats, habilidades, jugadores estrella y staff. El PDF incluye tambien una seccion de referencia de habilidades con todas las que usan tus jugadores. Optimizado para A4.',
      'Exportar JSON: Guarda tu plantilla como archivo JSON. Usalo para hacer copias de seguridad o compartir con otros jugadores que usen esta app.',
      'Importar: Carga un archivo JSON previamente exportado para restaurar una plantilla. Esto creara una nueva entrada de plantilla desde el archivo.',
      'Enlace para compartir: Si has iniciado sesion, puedes generar un enlace unico para compartir tu plantilla. Cualquiera con el enlace puede ver la plantilla (solo lectura) sin necesitar cuenta.',
      'Todas las opciones de exportacion/importacion se encuentran en la pestaña Staff del Constructor de Plantillas.',
    ],
    helpSavedTitle: 'Mis Equipos',
    helpSavedContent: [
      'Todas las plantillas se guardan automaticamente en el almacenamiento local de tu navegador. Accede a ellas desde la opcion "Plantillas Guardadas" en el menu.',
      'La lista de plantillas guardadas muestra el nombre, tipo de equipo, numero de jugadores y valor de equipo de un vistazo.',
      'Puedes cargar cualquier plantilla guardada para editarla, o eliminar plantillas que ya no necesites. La eliminacion es permanente y no se puede deshacer.',
      'Guardado en la Nube: Si has iniciado sesion, tus plantillas tambien pueden guardarse en la nube. Las plantillas en la nube son accesibles desde cualquier dispositivo a traves de tu cuenta y pueden compartirse con un enlace unico.',
      'Nota: Las plantillas locales se guardan en tu navegador. Borrar los datos del navegador las eliminara. Usa la exportacion JSON o el guardado en la nube para crear copias de seguridad.',
    ],
    helpMatchesTitle: 'Actas de Partido',
    helpMatchesContent: [
      'Las Actas de Partido te permiten registrar y seguir tus partidos. Accede desde la seccion "Actas de Partido" en el menu de navegacion. Necesitas iniciar sesion para crear y guardar actas.',
      'Crear un Acta: Toca "Nueva Acta" para iniciar un asistente paso a paso. Paso 1: Selecciona dos plantillas diferentes (Local y Visitante) de tus plantillas guardadas. Paso 2: Introduce los detalles — fecha, jornada, competicion, marcador y notas opcionales. Paso 3: Registra los eventos por jugador (TD, CAS, CP, INT, DEF, MVP). Paso 4: Revisa todo y guarda.',
      'Calculo de SPP: Los Puntos de Jugador Estrella se calculan automaticamente: TD = 3 SPP, Baja = 2 SPP, Pase Completado = 1 SPP, Intercepcion = 2 SPP, Desviacion = 1 SPP, MVP = 4 SPP (maximo 1 MVP por equipo).',
      'Aviso de TD: Si la suma de TDs registrados para los jugadores de un equipo no coincide con el marcador, se muestra un aviso para que puedas corregirlo antes de guardar.',
      'Editar: Puedes editar un acta guardada para actualizar marcadores, eventos o detalles. Abre el detalle del partido y toca "Editar" para modificarlo.',
      'Compartir: Genera un enlace unico para compartir cualquier acta. Cualquiera con el enlace puede ver el acta (solo lectura) sin cuenta. Puedes revocar el enlace en cualquier momento.',
      'Exportar PDF: Exporta cualquier acta como PDF imprimible mostrando el marcador completo, eventos de jugadores y desglose de SPP para ambos equipos.',
    ],
    helpStatsTitle: 'Estadisticas',
    helpStatsContent: [
      'La pagina de Estadisticas ofrece datos agregados de todas tus actas de partido. Accede desde "Estadisticas" en la seccion de Partidos del menu de navegacion.',
      'Estadisticas de Equipos: Una tabla de clasificacion con el historial de cada equipo — partidos jugados, victorias, empates, derrotas, touchdowns a favor y en contra, bajas infligidas y puntos totales (V=3, E=1, D=0).',
      'Estadisticas de Jugadores: Ranking individual de jugadores con TDs, CAS, CP, INT, DEF, premios MVP y SPP total en todos los partidos. Descubre cuales de tus jugadores rinden mejor.',
      'Filtro de Competicion: Filtra estadisticas por nombre de competicion para ver clasificaciones de una liga o torneo especifico, o selecciona "Todas las competiciones" para los totales combinados.',
    ],
    helpAccountTitle: 'Cuenta',
    helpAccountContent: [
      'La pagina de Cuenta esta disponible cuando has iniciado sesion. Accede desde el menu de navegacion en la seccion de usuario.',
      'Perfil: Consulta tu email, establece un nombre visible (2-50 caracteres) y ve tu plan actual (Gratuito o Premium) y fecha de registro.',
      'Mis Plantillas: Ve todas tus plantillas guardadas en la nube en un solo lugar, con nombre del equipo, fecha y si tienen enlace de compartir.',
      'Mis Partidos: Consulta tus actas de partido recientes con marcadores e informacion de competicion. Toca cualquier partido para ver su detalle completo.',
      'Mis Competiciones: Ve las ligas y torneos de los que eres miembro, tu rol y su estado actual.',
    ],
    helpShortcutsTitle: 'Consejos y Atajos',
    helpShortcutsContent: [
      'Idioma: Cambia entre ingles y español con el boton de bandera en la cabecera.',
      'Tema: Cambia entre modo oscuro y claro usando el interruptor de sol/luna en la cabecera.',
      'Desglose de TV: Toca el Valor de Equipo en la barra de presupuesto para expandir el desglose detallado de costes.',
      'Consultar Habilidades: Toca cualquier badge de habilidad en cualquier parte de la app (plantilla, modo juego, jugadores estrella) para ver su descripcion.',
      'Pagina de Estrellas: Explora todos los jugadores estrella del juego desde la pagina "Jugadores Estrella" en la seccion de Referencia. Filtra por nombre, equipo o reglas especiales.',
      'Pagina de Habilidades: Explora todas las habilidades organizadas por categoria desde la pagina "Habilidades" en la seccion de Referencia.',
      'Deslizar en Modo Juego: En movil, desliza a la izquierda sobre una tarjeta de jugador para cambiar rapidamente su estado al siguiente valor.',
    ],

    // Summary
    teamValue: 'Valor del Equipo',
    rerolls: 'Repeticiones',
    each: 'c/u',
    assistantCoaches: 'Entrenadores Asistentes',
    cheerleaders: 'Animadoras',
    dedicatedFans: 'Hinchas',
    apothecary: 'Boticario',
    treasury: 'Tesoro',
    players: 'Jugadores',
    min11: '(min 11)',
    exportPdf: 'Exportar PDF',
    exportJson: 'Exportar JSON',
    import_: 'Importar',
    importFailed: 'Error al importar',

    // Share roster
    shareRoster: 'Compartir',
    unshareRoster: 'Dejar de compartir',
    shareLink: 'Enlace para compartir',
    shareCopied: '¡Enlace copiado!',
    shareRequiresCloud: 'Guarda en la nube primero para compartir',
    shareRequiresLogin: 'Inicia sesión para compartir',
    sharedRosterTitle: 'Roster compartido',
    sharedRosterNotFound: 'Roster compartido no encontrado o enlace expirado',

    // Saved rosters
    importJson: 'Importar JSON',
    noSavedRosters: 'No hay equipos guardados.',
    createToStart: 'Crea un equipo nuevo para empezar.',
    unnamed: 'Sin nombre',
    playersCount: 'jugadores',
    delete_: 'Eliminar',
    deleteConfirm: (name: string) => `¿Eliminar plantilla "${name}"? No se puede deshacer.`,

    // Skill modal
    catAgility: 'Agilidad',
    catGeneral: 'General',
    catMutation: 'Mutacion',
    catPassing: 'Pase',
    catStrength: 'Fuerza',
    catDevious: 'Tramposa',
    catTrait: 'Rasgo',
    catExtraordinary: 'Extraordinaria',

    // Validation
    maxPlayersReached: 'Maximo 16 jugadores alcanzado',
    playerNotAvailable: 'Jugador no disponible para este equipo',
    maxPosition: (n: number) => `Maximo ${n} en esta posicion`,
    tooManyPlayers: (have: number, max: number) => `Demasiados jugadores: ${have}/${max}`,
    needMinPlayers: (min: number, have: number) => `Necesitas al menos ${min} jugadores (tienes ${have})`,
    tooManyRerolls: (have: number, max: number) => `Demasiadas repeticiones: ${have}/${max}`,
    tooManyPosition: (id: number, have: number, max: number) => `Demasiados en posicion ID ${id}: ${have}/${max}`,

    // Game Mode
    gameMode: 'Modo Juego',
    exitGameMode: 'Modo Edicion',
    gameResources: 'Recursos',
    gameStarPlayers: 'Jugadores Estrella',
    gameInducements: 'Incentivos',
    coach: 'Coach',
    playerStatus: 'Estado',
    statusOk: 'OK',
    statusKo: 'KO',
    statusBh: 'BH',
    statusSi: 'SI',
    statusDead: 'Muerto',
    statusSent: 'Expulsado',
    score: 'Marcador',
    home: 'LOCAL',
    away: 'VISIT',
    turn: 'Turno',
    half1: 'H1',
    half2: 'H2',
    available: 'Disponibles',

    // PDF
    pdfTitle: 'Blood Bowl Roster',
    unnamedTeam: 'Equipo sin nombre',
    pdfTeamValue: 'Valor del Equipo:',
    noPlayers: 'Sin jugadores',
    pdfRerolls: 'Repeticiones',
    pdfCoaches: 'Entrenadores Asistentes',
    pdfCheerleaders: 'Animadoras',
    pdfFans: 'Hinchas',
    pdfApothecary: 'Boticario',
    pdfTreasury: 'Tesoro',
    yes: 'Si',
    no: 'No',
    pdfPlayers: 'Jugadores:',
    pdfFooter: 'BB Toolkit Dugout',

    // Landing
    landingTagline: 'Roster Maker \u00B7 Actas de Partido \u00B7 Ligas \u00B7 Torneos',
    landingSubtitle: 'Todo lo que necesitas para dirigir una liga de Blood Bowl.',
    landingSubtitle2: 'Todos los equipos, todas las reglas, todo en un solo lugar. Season 3.',
    landingCta: 'Crea tu Plantilla',
    landingCtaSaved: 'Mis Equipos',
    landingFeaturesTitle: 'Todo lo que Necesitas',
    landingFeature1Title: 'Constructor de Plantillas',
    landingFeature1Desc: 'Todos los equipos oficiales de Blood Bowl con posiciones, stats, habilidades y clasificacion por tier. Control de presupuesto con desglose de Valor de Equipo.',
    landingFeature2Title: 'Actas de Partido',
    landingFeature2Desc: 'Registra tus partidos con un asistente paso a paso. TDs, bajas, pases, intercepciones y MVP por jugador. Calculo automatico de SPP.',
    landingFeature3Title: 'Ligas y Torneos',
    landingFeature3Desc: 'Crea y gestiona ligas y torneos con clasificaciones, copias de plantilla y progresion automatica (SPP, lesiones, muertes).',
    landingFeature4Title: 'Estrellas e Incentivos',
    landingFeature4Desc: 'Contrata jugadores estrella filtrados por las reglas de tu equipo. Añade incentivos como Magos, Sobornos y Barriles Bloodweiser.',
    landingFeature5Title: 'Modo Juego',
    landingFeature5Desc: 'Vista dedicada para el dia del partido. Controla marcador, turnos, repeticiones y estado de jugadores (OK/KO/BH/SI/Muerto). Diseñado para movil.',
    landingFeature6Title: 'Compartir y Exportar',
    landingFeature6Desc: 'Comparte plantillas y actas de partido por enlace. Exporta PDFs listos para imprimir o archivos JSON. Importa plantillas de otros coaches.',
    landingFeature7Title: 'Progresion de Jugadores',
    landingFeature7Desc: 'Sube de nivel a tus jugadores con mejoras de habilidades, registra lesiones y gestiona los Puntos de Jugador Estrella entre partidos y competiciones.',
    landingFeature8Title: 'Referencia de Habilidades',
    landingFeature8Desc: 'Base de datos completa de habilidades y estrellas con descripciones, colores por categoria. Toca cualquier habilidad para consultarla al instante.',
    landingHowTitle: 'Como Funciona',
    landingStep1: 'Elige tu equipo entre todas las razas oficiales de Blood Bowl',
    landingStep2: 'Añade jugadores, staff, estrellas e incentivos dentro del presupuesto',
    landingStep3: 'Juega partidos, registra stats y dirige tu liga',
    landingBottomText: 'Listo para dirigir tu liga de Blood Bowl?',

    // Matches / Acta de Partido
    navMatches: 'Partidos',
    navSectionMatches: 'Partidos',
    matchesTitle: 'Actas de Partido',
    newMatch: 'Nueva Acta',
    matchDate: 'Fecha',
    matchRound: 'Jornada',
    matchCompetition: 'Competicion',
    matchHomeTeam: 'Equipo Local',
    matchAwayTeam: 'Equipo Visitante',
    matchTD: 'TD',
    matchCAS: 'CAS',
    matchMVP: 'MVP',
    matchSPP: 'SPP',
    matchSave: 'Guardar Acta',
    matchDelete: 'Eliminar',
    matchExportPdf: 'Exportar PDF',
    matchNoMatches: 'No hay actas de partido.',
    matchCreateFirst: 'Crea tu primera acta de partido!',
    matchLoginRequired: 'Inicia sesion para guardar actas de partido.',
    matchNext: 'Siguiente',
    matchPrevious: 'Anterior',
    matchStep1: 'Seleccionar Equipos',
    matchStep2: 'Detalles del Partido',
    matchStep3: 'Eventos de Jugadores',
    matchStep4: 'Revision',
    matchSelectRoster: 'Seleccionar plantilla',
    matchSameRosterError: 'Los equipos Local y Visitante deben ser diferentes',
    matchScore: 'Marcador',
    matchNotes: 'Notas',
    matchTotal: 'Total',
    matchReview: 'Revisar y Guardar',
    matchBackToList: 'Volver a Partidos',
    matchDeleteConfirm: (name: string) => `¿Eliminar acta "${name}"? No se puede deshacer.`,
    matchSaving: 'Guardando...',
    matchNoRosters: 'No hay plantillas. Crea plantillas primero.',
    matchPlayers: 'Jugadores',
    matchVs: 'vs',
    matchCP: 'CP',
    matchINT: 'INT',
    matchDEF: 'DEF',
    matchEdit: 'Editar Acta de Partido',
    matchEditBtn: 'Editar',
    matchShare: 'Compartir',
    matchUnshare: 'Dejar de compartir',
    matchShareLink: 'Enlace para compartir',
    matchTdWarning: (team: string, tdSum: number, score: number) => `${team}: los TDs de jugadores (${tdSum}) no coinciden con el marcador (${score})`,
    matchStatsTitle: 'Estadisticas',
    matchStatsAll: 'Todas las competiciones',
    matchStatsTeams: 'Equipos',
    matchStatsPlayers: 'Jugadores',
    matchStatsRace: 'Raza',
    matchStatsP: 'PJ',
    matchStatsW: 'V',
    matchStatsD: 'E',
    matchStatsL: 'D',
    matchStatsTDF: 'TF',
    matchStatsTDA: 'TC',
    matchStatsCAS: 'CAS',
    matchStatsPts: 'Pts',
    matchStatsTeam: 'Equipo',
    matchStatsGames: 'PJ',

    // Account / Profile
    accountTitle: 'Mi Cuenta',
    accountLoginRequired: 'Inicia sesion para acceder a tu cuenta.',
    accountTabProfile: 'Perfil',
    accountTabRosters: 'Plantillas',
    accountTabMatches: 'Partidos',
    accountTabCompetitions: 'Competiciones',
    accountEmail: 'Email',
    accountDisplayName: 'Nombre visible',
    accountNoName: 'Sin definir',
    accountSave: 'Guardar',
    accountEditBtn: 'Editar',
    accountPlan: 'Plan',
    accountUntil: 'hasta',
    accountMemberSince: 'Miembro desde',
    accountRole: 'Rol',
    accountNoRosters: 'No hay plantillas guardadas en la nube.',
    accountNoCompetitions: 'No hay competiciones todavia.',
    accountShared: 'Compartida',
    accountLeague: 'Liga',
    accountTournament: 'Torneo',
    accountStatusActive: 'Activa',
    accountStatusFinished: 'Finalizada',
    accountOwner: 'Organizador',
    navAccount: 'Cuenta',

    // Competitions
    compLeagues: 'Ligas',
    compTournaments: 'Torneos',
    compCreate: 'Crear',
    compNamePlaceholder: 'Nombre de la competicion...',
    compLoginRequired: 'Inicia sesion para gestionar competiciones.',
    compLoading: 'Cargando...',
    compNoCompetitions: 'No hay competiciones todavia.',
    compNotFound: 'Competicion no encontrada.',
    compStatusActive: 'Activa',
    compStatusFinished: 'Finalizada',
    compStatusArchived: 'Archivada',
    compOwner: 'Organizador',
    compMember: 'Miembro',
    compRostersCount: (n: number) => `${n} equipo${n !== 1 ? 's' : ''}`,
    compDeleteConfirm: (name: string) => `¿Eliminar "${name}"? Se perderan todos los equipos y partidos.`,
    compStandings: 'Clasificacion',
    compMatches: 'Partidos',
    compRosters: 'Equipos',
    compNewMatch: 'Nuevo Partido',
    compNoMatches: 'No hay partidos todavia.',
    compNoRosters: 'No hay equipos inscritos.',
    compEnrollRoster: 'Inscribir Equipo',
    compEnrollBtn: 'Inscribir',
    compEnrolling: 'Inscribiendo...',
    compAlreadyEnrolled: 'Ya inscrita',
    compFinish: 'Finalizar',
    compReactivate: 'Reactivar',
    compRemoveRosterConfirm: '¿Retirar este equipo de la competicion?',
    compDeleteMatchConfirm: '¿Eliminar este partido? La progresion se revertira.',
    compPostMatchStatus: 'Estado',
    compPMS_ok: 'OK',
    compPMS_ko: 'KO',
    compPMS_bh: 'BH',
    compPMS_si: 'LG',
    compPMS_dead: 'Muerto',
    compPMS_mng: 'MNG',
    compInjury_niggle: 'Niggle',
    compInjury_MA: '-MA',
    compInjury_AV: '-AV',
    compInjury_AG: '-AG',
    compInjury_PA: '-PA',
    compInjury_ST: '-ST',
    compMatchStep2: 'Eventos',
    compMatchStep3: 'Revision',
    compStandingsTeam: 'Equipo',
    compStandingsCoach: 'Coach',
    compStandingsRace: 'Raza',
    navSectionCompetitions: 'Competiciones',
    navLeagues: 'Ligas',
    navTournaments: 'Torneos',
    compMatchesCount: (n: number) => `${n} partido${n !== 1 ? 's' : ''}`,
    compCreatedAt: 'Creada',
    compEmptyTitle: (type: string) => `No hay ${type}s todavia`,
    compEmptyDescription: (type: string) => `Crea tu primera ${type} para empezar a registrar partidos, clasificaciones y progresion de equipos.`,
    compEmptyCreate: (type: string) => `Crear ${type}`,
    compSummaryRosters: 'Equipos',
    compSummaryMatches: 'Partidos',
    compSummaryLeader: 'Lider',
    compSummaryNoLeader: 'Sin partidos',
    compSummaryRounds: 'Jornadas',
    compLoginTitle: 'Inicio de sesion necesario',
    compLoginDescription: 'Inicia sesion para crear y gestionar tus ligas y torneos.',
    compMatchesEmptyTitle: 'No hay partidos jugados',
    compMatchesEmptyDesc: 'Registra tu primer partido para empezar a seguir resultados y progresion.',
    compRostersEmptyTitle: 'No hay equipos inscritos',
    compRostersEmptyDesc: 'Inscribe equipos de tus plantillas guardadas para iniciar la competicion.',
    compNeedMoreRosters: 'Inscribe al menos 2 equipos antes de crear un partido.',
    compRound: 'Jornada',
    compDeleteComp: 'Eliminar',
    // Multi-user / scheduling
    compJoin: 'Unirse',
    compJoinCode: 'Codigo de invitacion',
    compJoinCodePlaceholder: 'Introduce el codigo...',
    compJoinSuccess: (name: string) => `Te has unido a "${name}"!`,
    compJoinAlready: 'Ya eres miembro.',
    compJoinInvalid: 'Codigo de invitacion no valido.',
    compGenerateCode: 'Generar codigo',
    compShareCode: 'Compartir codigo',
    compCopyCode: 'Copiar',
    compCodeCopied: 'Codigo copiado!',
    compRemoveCode: 'Quitar codigo',
    compSchedule: 'Calendario',
    compGenerateSchedule: 'Generar calendario',
    compDeleteSchedule: 'Eliminar calendario',
    compDeleteScheduleConfirm: 'Eliminar todos los partidos programados (no jugados)?',
    compScheduleGenerated: (matches: number, rounds: number) => `${matches} partidos generados en ${rounds} jornadas.`,
    compScheduleExists: 'El calendario ya existe. Eliminalo primero para regenerar.',
    compMyMatches: 'Mis partidos',
    compAllMatches: 'Todos',
    compScheduled: 'Programado',
    compPlayed: 'Jugado',
    compReportMatch: 'Reportar partido',
    compMatchScheduled: 'Pendiente',
    compMatchPlayed: 'Jugado',
    compNoMyMatches: 'No tienes partidos asignados todavia.',
    compPendingMatches: 'Pendientes',
    compPlayedMatches: 'Jugados',

    // Stat tooltips
    tipMA: 'Movimiento',
    tipST: 'Fuerza',
    tipAG: 'Agilidad',
    tipPA: 'Pase',
    tipAV: 'Valor de Armadura',
    tipTD: 'Touchdown',
    tipCAS: 'Baja',
    tipCP: 'Pase Completado',
    tipINT: 'Intercepcion',
    tipDEF: 'Desviacion',
    tipMVP: 'Jugador Mas Valioso',
    tipSPP: 'Puntos de Jugador Estrella',
    tipBH: 'Herida Grave',
    tipSI: 'Lesion Seria',
    tipKILL: 'Muerte',
    tipP: 'Jugados',
    tipW: 'Ganados',
    tipD: 'Empatados',
    tipL: 'Perdidos',
    tipTDF: 'Touchdowns a Favor',
    tipTDA: 'Touchdowns en Contra',
    tipDiff: 'Diferencia de Touchdowns',
    tipPts: 'Puntos',
    tipGP: 'Partidos Jugados',

    // Notifications
    notifTitle: 'Notificaciones',
    notifEmpty: 'Sin notificaciones',
    notifMarkAllRead: 'Marcar todas leidas',
    notifMatchResult: 'Resultado de partido',
    notifRosterEnrolled: 'Equipo inscrito',
    notifJustNow: 'ahora',
    notifMinutesAgo: (n: number) => `hace ${n}m`,
    notifHoursAgo: (n: number) => `hace ${n}h`,
    notifDaysAgo: (n: number) => `hace ${n}d`,

    // Save / Discard
    save: 'Guardar',
    discard: 'Descartar',
    rosterSaved: 'Equipo guardado',
    rosterNameRequired: 'Introduce un nombre de equipo antes de guardar',
    unsavedChangesTitle: 'Cambios sin guardar',
    unsavedChangesMsg: 'Tienes cambios sin guardar que se perderan.',
    discardAndLeave: 'Descartar y salir',

    // Cookie banner
    cookieText: 'Este sitio usa cookies y almacenamiento local para guardar tus plantillas y preferencias.',
    cookiePolicy: 'Politica de Privacidad y Cookies',
    cookieAccept: 'Aceptar',

    // Policy page
    policyTitle: 'Politica de Privacidad y Cookies',
    policyUpdated: 'Ultima actualizacion: Febrero 2026',
    policyIntroTitle: 'Introduccion',
    policyIntroContent: [
      'BB Toolkit Dugout ("la App") es una herramienta gratuita y de codigo abierto para crear y gestionar plantillas de equipos de Blood Bowl, actas de partido y competiciones. Respetamos tu privacidad y nos comprometemos a ser transparentes sobre como se manejan los datos.',
      'Esta politica explica que datos almacena la App, como se usan y tus derechos respecto a esos datos.',
    ],
    policyCookiesTitle: 'Cookies',
    policyCookiesContent: [
      'La App usa una cookie (o entrada de localStorage) minima unicamente para recordar que has aceptado esta politica de cookies. No se usan cookies de seguimiento, analitica ni publicidad de terceros.',
      'La cookie almacenada es: "bb_cookies_accepted" — una simple marca ("1") que indica que has cerrado el banner de cookies. No tiene caducidad y puede eliminarse en cualquier momento limpiando los datos del navegador.',
    ],
    policyLocalStorageTitle: 'Almacenamiento Local',
    policyLocalStorageContent: [
      'La App usa el Local Storage y Session Storage de tu navegador para guardar datos localmente en tu dispositivo. Estos datos nunca salen de tu navegador y no se envian a ningun servidor.',
      'Los datos almacenados incluyen: tus plantillas guardadas (composicion del equipo, nombres de jugadores, configuracion de staff), tu preferencia de idioma (ingles/español), tu preferencia de tema (oscuro/claro) y el estado temporal del modo juego (marcador, turnos, estados de jugadores) en session storage.',
      'Todos los datos permanecen en tu dispositivo. Limpiar los datos del navegador o el almacenamiento local eliminara permanentemente todas las plantillas y preferencias guardadas.',
    ],
    policyDataTitle: 'Recopilacion de Datos',
    policyDataContent: [
      'La App no recopila, transmite ni almacena ningun dato personal en servidores externos. No se requieren cuentas de usuario para usar el creador de plantillas (la funcion de login esta reservada solo para administracion).',
      'No se realiza ningun tipo de analitica, telemetria ni seguimiento de uso. Tu direccion IP no es registrada por la App.',
    ],
    policyThirdPartyTitle: 'Servicios de Terceros',
    policyThirdPartyContent: [
      'La App se aloja como un sitio web estatico. No se cargan scripts de terceros para analitica, publicidad ni seguimiento.',
      'Los unicos recursos externos cargados son fuentes web (Google Fonts: Bungee, Inter) para tipografia. El servicio de fuentes de Google puede registrar datos estandar de solicitud web segun su propia politica de privacidad.',
    ],
    policyRightsTitle: 'Tus Derechos',
    policyRightsContent: [
      'Como todos los datos se almacenan localmente en tu navegador, tienes control total sobre ellos en todo momento. Puedes ver, exportar (via exportacion JSON) o eliminar tus datos cuando quieras.',
      'Para eliminar todos los datos de la App: limpia el almacenamiento local de tu navegador para este sitio, o usa la opcion "Borrar datos del sitio" de tu navegador.',
    ],
    policyContactTitle: 'Contacto',
    policyContactContent: [
      'Si tienes alguna pregunta sobre esta politica de privacidad o la App, puedes contactarnos a traves del repositorio del proyecto o contactar al desarrollador.',
    ],
  },
};

export type Strings = {
  [K in keyof typeof strings.en]: (typeof strings.en)[K] extends (...args: infer A) => string
    ? (...args: A) => string
    : (typeof strings.en)[K] extends string[]
    ? string[]
    : string;
};

interface LangContextValue {
  lang: Lang;
  setLang: (l: Lang) => void;
  t: Strings;
}

const LangContext = createContext<LangContextValue>({
  lang: 'en',
  setLang: () => {},
  t: strings.en,
});

function getInitialLang(): Lang {
  try {
    const saved = localStorage.getItem('bb_lang');
    if (saved === 'en' || saved === 'es') return saved;
  } catch {}
  // Auto-detect from browser
  if (navigator.language.startsWith('es')) return 'es';
  return 'en';
}

export function LanguageProvider({ children }: { children: ReactNode }) {
  const [lang, setLangState] = useState<Lang>(getInitialLang);

  const setLang = useCallback((l: Lang) => {
    setLangState(l);
    try {
      localStorage.setItem('bb_lang', l);
    } catch {}
  }, []);

  useEffect(() => {
    document.documentElement.setAttribute('lang', lang);
  }, [lang]);

  const t = strings[lang];

  return (
    <LangContext.Provider value={{ lang, setLang, t }}>
      {children}
    </LangContext.Provider>
  );
}

export function useLang() {
  return useContext(LangContext);
}

export function getStrings(lang: Lang): Strings {
  return strings[lang];
}
